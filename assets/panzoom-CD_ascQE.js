var v=function(){return v=Object.assign||function(t){for(var r,i=1,d=arguments.length;i<d;i++){r=arguments[i];for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(t[p]=r[p])}return t},v.apply(this,arguments)};typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(t,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),i}));var ht=typeof document<"u"&&!!document.documentMode,Q;function gt(){return Q||(Q=document.createElement("div").style)}var it=["webkit","moz","ms"],D={};function rt(e){if(D[e])return D[e];var t=gt();if(e in t)return D[e]=e;for(var r=e[0].toUpperCase()+e.slice(1),i=it.length;i--;){var d="".concat(it[i]).concat(r);if(d in t)return D[e]=d}}function G(e,t){return parseFloat(t[rt(e)])||0}function L(e,t,r){r===void 0&&(r=window.getComputedStyle(e));var i=t==="border"?"Width":"";return{left:G("".concat(t,"Left").concat(i),r),right:G("".concat(t,"Right").concat(i),r),top:G("".concat(t,"Top").concat(i),r),bottom:G("".concat(t,"Bottom").concat(i),r)}}function E(e,t,r){e.style[rt(t)]=r}function yt(e,t){var r=rt("transform");E(e,"transition","".concat(r," ").concat(t.duration,"ms ").concat(t.easing))}function wt(e,t,r){var i=t.x,d=t.y,p=t.scale,h=t.isSVG;if(E(e,"transform","scale(".concat(p,") translate(").concat(i,"px, ").concat(d,"px)")),h&&ht){var g=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",g)}}function _(e){var t=e.parentNode,r=window.getComputedStyle(e),i=window.getComputedStyle(t),d=e.getBoundingClientRect(),p=t.getBoundingClientRect();return{elem:{style:r,width:d.width,height:d.height,top:d.top,bottom:d.bottom,left:d.left,right:d.right,margin:L(e,"margin",r),border:L(e,"border",r)},parent:{style:i,width:p.width,height:p.height,top:p.top,bottom:p.bottom,left:p.left,right:p.right,padding:L(t,"padding",i),border:L(t,"border",i)}}}var S={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?S={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(S={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function k(e,t,r,i){S[e].split(" ").forEach(function(d){t.addEventListener(d,r,i)})}function H(e,t,r){S[e].split(" ").forEach(function(i){t.removeEventListener(i,r)})}function ct(e,t){for(var r=e.length;r--;)if(e[r].pointerId===t.pointerId)return r;return-1}function et(e,t){var r;if(t.touches){r=0;for(var i=0,d=t.touches;i<d.length;i++){var p=d[i];p.pointerId=r++,et(e,p)}return}r=ct(e,t),r>-1&&e.splice(r,1),e.push(t)}function mt(e,t){if(t.touches){for(;e.length;)e.pop();return}var r=ct(e,t);r>-1&&e.splice(r,1)}function ut(e){e=e.slice(0);for(var t=e.pop(),r;r=e.pop();)t={clientX:(r.clientX-t.clientX)/2+t.clientX,clientY:(r.clientY-t.clientY)/2+t.clientY};return t}function tt(e){if(e.length<2)return 0;var t=e[0],r=e[1];return Math.sqrt(Math.pow(Math.abs(r.clientX-t.clientX),2)+Math.pow(Math.abs(r.clientY-t.clientY),2))}function bt(e){for(var t=e;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function xt(e){return(e.getAttribute("class")||"").trim()}function Et(e,t){return e.nodeType===1&&" ".concat(xt(e)," ").indexOf(" ".concat(t," "))>-1}function Pt(e,t){for(var r=e;r!=null;r=r.parentNode)if(Et(r,t.excludeClass)||t.exclude.indexOf(r)>-1)return!0;return!1}var Mt=/^http:[\w\.\/]+svg$/;function St(e){return Mt.test(e.namespaceURI)&&e.nodeName.toLowerCase()!=="svg"}function At(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var ft={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(e){e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:wt,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function Ot(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(e.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!bt(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t=v(v({},ft),t);var r=St(e),i=e.parentNode;i.style.overflow=t.overflow,i.style.userSelect="none",i.style.touchAction=t.touchAction,(t.canvas?i:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,E(e,"transformOrigin",typeof t.origin=="string"?t.origin:r?"0 0":"50% 50%");function d(){i.style.overflow="",i.style.userSelect="",i.style.touchAction="",i.style.cursor="",e.style.cursor="",e.style.userSelect="",e.style.touchAction="",E(e,"transformOrigin","")}function p(n){n===void 0&&(n={});for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o]);(n.hasOwnProperty("cursor")||n.hasOwnProperty("canvas"))&&(i.style.cursor=e.style.cursor="",(t.canvas?i:e).style.cursor=t.cursor),n.hasOwnProperty("overflow")&&(i.style.overflow=n.overflow),n.hasOwnProperty("touchAction")&&(i.style.touchAction=n.touchAction,e.style.touchAction=n.touchAction)}var h=0,g=0,s=1,A=!1;z(t.startScale,{animate:!1,force:!0}),setTimeout(function(){B(t.startX,t.startY,{animate:!1,force:!0})});function O(n,o,c){if(!c.silent){var l=new CustomEvent(n,{detail:o});e.dispatchEvent(l)}}function R(n,o,c){var l={x:h,y:g,scale:s,isSVG:r,originalEvent:c};return requestAnimationFrame(function(){typeof o.animate=="boolean"&&(o.animate?yt(e,o):E(e,"transition","none")),o.setTransform(e,l,o),O(n,l,o),O("panzoomchange",l,o)}),l}function V(n,o,c,l){var a=v(v({},t),l),f={x:h,y:g,opts:a};if(!a.force&&(a.disablePan||a.panOnlyWhenZoomed&&s===a.startScale))return f;if(n=parseFloat(n),o=parseFloat(o),a.disableXAxis||(f.x=(a.relative?h:0)+n),a.disableYAxis||(f.y=(a.relative?g:0)+o),a.contain){var u=_(e),y=u.elem.width/s,m=u.elem.height/s,P=y*c,M=m*c,b=(P-y)/2,x=(M-m)/2;if(a.contain==="inside"){var $=(-u.elem.margin.left-u.parent.padding.left+b)/c,j=(u.parent.width-P-u.parent.padding.left-u.elem.margin.left-u.parent.border.left-u.parent.border.right+b)/c;f.x=Math.max(Math.min(f.x,j),$);var J=(-u.elem.margin.top-u.parent.padding.top+x)/c,K=(u.parent.height-M-u.parent.padding.top-u.elem.margin.top-u.parent.border.top-u.parent.border.bottom+x)/c;f.y=Math.max(Math.min(f.y,K),J)}else if(a.contain==="outside"){var $=(-(P-u.parent.width)-u.parent.padding.left-u.parent.border.left-u.parent.border.right+b)/c,j=(b-u.parent.padding.left)/c;f.x=Math.max(Math.min(f.x,j),$);var J=(-(M-u.parent.height)-u.parent.padding.top-u.parent.border.top-u.parent.border.bottom+x)/c,K=(x-u.parent.padding.top)/c;f.y=Math.max(Math.min(f.y,K),J)}}return a.roundPixels&&(f.x=Math.round(f.x),f.y=Math.round(f.y)),f}function C(n,o){var c=v(v({},t),o),l={scale:s,opts:c};if(!c.force&&c.disableZoom)return l;var a=t.minScale,f=t.maxScale;if(c.contain){var u=_(e),y=u.elem.width/s,m=u.elem.height/s;if(y>1&&m>1){var P=u.parent.width-u.parent.border.left-u.parent.border.right,M=u.parent.height-u.parent.border.top-u.parent.border.bottom,b=P/y,x=M/m;t.contain==="inside"?f=Math.min(f,b,x):t.contain==="outside"&&(a=Math.max(a,b,x))}}return l.scale=Math.min(Math.max(n,a),f),l}function B(n,o,c,l){var a=V(n,o,s,c);return h!==a.x||g!==a.y?(h=a.x,g=a.y,R("panzoompan",a.opts,l)):{x:h,y:g,scale:s,isSVG:r,originalEvent:l}}function z(n,o,c){var l=C(n,o),a=l.opts;if(!(!a.force&&a.disableZoom)){n=l.scale;var f=h,u=g;if(a.focal){var y=a.focal;f=(y.x/n-y.x/s+h*n)/n,u=(y.y/n-y.y/s+g*n)/n}var m=V(f,u,n,{relative:!1,force:!0});return h=m.x,g=m.y,s=n,R("panzoomzoom",a,c)}}function nt(n,o){var c=v(v(v({},t),{animate:!0}),o);return z(s*Math.exp((n?1:-1)*c.step),c)}function lt(n){return nt(!0,n)}function st(n){return nt(!1,n)}function Z(n,o,c,l){var a=_(e),f={width:a.parent.width-a.parent.padding.left-a.parent.padding.right-a.parent.border.left-a.parent.border.right,height:a.parent.height-a.parent.padding.top-a.parent.padding.bottom-a.parent.border.top-a.parent.border.bottom},u=o.clientX-a.parent.left-a.parent.padding.left-a.parent.border.left-a.elem.margin.left,y=o.clientY-a.parent.top-a.parent.padding.top-a.parent.border.top-a.elem.margin.top;r||(u-=a.elem.width/s/2,y-=a.elem.height/s/2);var m={x:u/f.width*(f.width*n),y:y/f.height*(f.height*n)};return z(n,v(v({},c),{animate:!1,focal:m}),l)}function dt(n,o){n.preventDefault();var c=v(v(v({},t),o),{animate:!1}),l=n.deltaY===0&&n.deltaX?n.deltaX:n.deltaY,a=l<0?1:-1,f=C(s*Math.exp(a*c.step/3),c).scale;return Z(f,n,c,n)}function vt(n){var o=v(v(v({},t),{animate:!0,force:!0}),n);s=C(o.startScale,o).scale;var c=V(o.startX,o.startY,s,o);return h=c.x,g=c.y,R("panzoomreset",o)}var X,Y,N,T,at,I,w=[];function q(n){if(!Pt(n.target,t)){et(w,n),A=!0,t.handleStartEvent(n),X=h,Y=g,O("panzoomstart",{x:h,y:g,scale:s,isSVG:r,originalEvent:n},t);var o=ut(w);N=o.clientX,T=o.clientY,at=s,I=tt(w)}}function F(n){if(!(!A||X===void 0||Y===void 0||N===void 0||T===void 0)){et(w,n);var o=ut(w),c=w.length>1,l=s;if(c){I===0&&(I=tt(w));var a=tt(w)-I;l=C(a*t.step/80+at).scale,Z(l,o,{animate:!1},n)}(!c||t.pinchAndPan)&&B(X+(o.clientX-N)/l,Y+(o.clientY-T)/l,{animate:!1},n)}}function U(n){w.length===1&&O("panzoomend",{x:h,y:g,scale:s,isSVG:r,originalEvent:n},t),mt(w,n),A&&(A=!1,X=Y=N=T=void 0)}var W=!1;function ot(){W||(W=!0,k("down",t.canvas?i:e,q),k("move",document,F,{passive:!0}),k("up",document,U,{passive:!0}))}function pt(){W=!1,H("down",t.canvas?i:e,q),H("move",document,F),H("up",document,U)}return t.noBind||ot(),{bind:ot,destroy:pt,eventNames:S,getPan:function(){return{x:h,y:g}},getScale:function(){return s},getOptions:function(){return At(t)},handleDown:q,handleMove:F,handleUp:U,pan:B,reset:vt,resetStyle:d,setOptions:p,setStyle:function(n,o){return E(e,n,o)},zoom:z,zoomIn:lt,zoomOut:st,zoomToPoint:Z,zoomWithWheel:dt}}Ot.defaultOptions=ft;export{Ot as P};
